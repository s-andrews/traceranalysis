import requests
import os

unlabeled = '''6823.466202	0	0	0	0	0	0	0	0	0
12695.59522	1376.488937	0	0	0	0	0	0	0	0'''

labeled = '''33379.18968	7809.083278	0	0	0	0	0	0	0	0
1600.347416	0	0	0	0	0	0	0	0	0
816408.5013	355668.3728	129649.5097	17805.96618	5255.480181	0	0	0	0	0
839252.6869	321462.8832	97964.2961	4450.081651	1866.533557	0	0	0	0	5194.056985
487533.2027	206274.7632	89460.9842	23192.17508	3415.619805	1707.080992	0	0	0	1915.658259
448552.1424	156387.9839	48538.38561	0	1865.649312	7126.974204	0	0	0	0
158892.5161	65878.63867	0	0	0	0	0	0	1388.773899	0
32073.50768	17029.32821	0	0	0	0	0	0	0	0
28469.73786	12768.28417	2136.741346	0	0	0	0	0	0	0
19102.71875	5456.395105	0	0	0	0	0	0	0	0
9508.930468	0	0	0	0	0	0	0	0	0
5998.406902	0	0	0	0	0	0	0	0	0
406534.3852	107846.7907	22931.57731	0	0	0	0	0	0	0
158338.4744	47900.2421	3206.246705	0	0	0	0	0	0	0
254327.7915	74305.40004	16574.6042	909.6548462	0	0	0	0	0	0
18521.56331	3527.225896	908.2627329	0	0	0	0	0	0	0
24212.54294	8726.22231	0	0	0	0	0	0	0	0
4502.226356	0	0	0	0	0	0	0	0	0
7171.709936	0	0	0	0	0	0	0	0	0
0	0	0	0	0	0	0	0	0	0
2855.827422	0	0	0	0	0	0	0	0	1080.41744
2571.909489	0	0	0	904.9985516	0	0	0	0	0'''

test_case = 'bad_data_row_of_zeros'

TEST_DATA_FNAME = 'test_data.tsv'
TEST_UNLABELED_FNAME = 'test_unlabeled.tsv'
TEST_OUTPUT_FNAME = 'test_output.tsv'

data = open(os.path.join(test_case, TEST_DATA_FNAME)).read()
unlabeled = open(os.path.join(test_case, TEST_UNLABELED_FNAME)).read()
expected = open(os.path.join(test_case, TEST_OUTPUT_FNAME)).read()

r = requests.post('http://localhost:5000/api/tracer', {
	"unlabeledData": unlabeled,
	"labeledData": data 
})

result = str(r.json())
#result_str = '\n'.join(['\t'.join([str(f) for f in o]) for o in result])

assert result_str == expected
